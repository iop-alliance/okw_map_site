<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Open-Know-Where Initiative</title><meta name="generator" content="Publii Open-Source CMS for Static Site"><script>window.publiiEmbedConsentCheck = function (cookieGroup) {
                var configName = 'publii-gdpr-allowed-cookies-v1';
                var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');
                var configIsFresh = false;

                if (lastConfigSave !== null) {
                    lastConfigSave = parseInt(lastConfigSave, 10);

                    if (lastConfigSave === 0) {
                        configIsFresh = true;
                    } else if (90 > 0 && +new Date() - lastConfigSave < 90 * 24 * 60 * 60 * 1000) {
                        configIsFresh = true;
                    }
                }

                if (!configIsFresh) {
                    return;
                }

                var config = localStorage.getItem(configName);

                if (config && config.indexOf(cookieGroup) > -1) {
                    var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

                    for (var i = 0; i < iframesToUnlock.length; i++) {
                        var iframeWrapper = iframesToUnlock[i];

                        if (iframeWrapper.getAttribute('data-consent-given') === 'true') {
                            continue;
                        }

                        iframeWrapper.setAttribute('data-consent-given', 'true');
                        iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
                        iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
                        var iframe = iframeWrapper.querySelector('iframe');
                        iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
                    }
                }
            }</script><script type="gdpr-blocker/analytics" async src="https://www.googletagmanager.com/gtag/js?id=G-RZDSLZEZ2R"></script><script type="gdpr-blocker/analytics">window.dataLayer = window.dataLayer || [];
				  function gtag(){dataLayer.push(arguments);}
				  gtag('js', new Date());
				  gtag('config', 'G-RZDSLZEZ2R' );</script><link rel="canonical" href="https://map.internetofproduction.org/"><link rel="alternate" type="application/atom+xml" href="https://map.internetofproduction.org/feed.xml"><link rel="alternate" type="application/json" href="https://map.internetofproduction.org/feed.json"><link rel="stylesheet" href="https://map.internetofproduction.org/assets/css/style.css?v=b7ad4f7bad2ad3d99264e02a59d8d23e"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Organization","name":"Open-Know-Where Initiative","logo":"https://map.internetofproduction.org/media/website/logo_blue.png","url":"https://map.internetofproduction.org/index.html"}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><link rel="icon" type="image/x-icon" href="/media/files/favicon.ico"></head><body><header class="top"><div class="top__logo"><a class="logo" href="https://map.internetofproduction.org/index.html"><img src="https://map.internetofproduction.org/media/website/logo_blue.png" alt="Open-Know-Where Initiative" width="4177" height="2152"></a></div><div class="top__links"><a href="https://github.com/iop-alliance" class="top__links-url" aria-label="Github" title="Github" target="_blank" rel="noopener"><svg height="24" width="24"><use xlink:href="https://map.internetofproduction.org/assets/svg/svg-map.svg#github"></use></svg></a></div></header><main class="main"><div class="main__left"><div class="main__left-inner"><div class="main__left-content"><article class="post post--on-frontpage"><header><h1 class="post__title">OPEN-KNOW-WHERE INITIATIVE</h1></header><div class="post__entry"><pre>REV 2.1, 23/01/2024<br>Author: Antonio de Jesus Anaya Hernandez, DevOps Eng. <br>CC BY-SA 4.0<br>2023-2024, The Internet of Production Alliance. </pre><h2 id="okwmapping">INTRODUCTION</h2><p><strong>What:</strong> This is the front page of the <strong>Open-Know-Where Map of Manufacturing</strong> project to survey and collect data on machines, facilities, people, and materials enabling distributed manufacturing.<br><br><strong>Who:</strong> This is intended to be use by Makers and organisations around Maker-spaces, Fab-Labs, and innovation hubs within the Internet of Production Alliance and its projects.<br><br><strong>Purpose:</strong> The Internet of Production Alliance collects the data to form a database of machines, facilities, people, and materials by location, to be analysed and mapped for the Open-Know-Where initiative.</p><p><strong>Data Processing:</strong> The data collected is processed by the DevOps office of the Internet of Production Alliance. </p><p><strong>Data expiration:</strong> Data would be re-validated or discarded after 36 months from the initial date of data publishing, expected on 2024/02 TBA. </p><p class="msg msg--info">Our data policy is found at <a href="https://map.internetofproduction.org/data-privacy-policy/index.html" target="_blank" rel="nofollow noopener noreferrer">https://map.internetofproduction.org/data-privacy-policy/index.html</a></p><p class="msg msg--info">For any map related concerns and requests contact by email to: <a href="mailto:antonio.anaya@internetofproduction.org">antonio.anaya@internetofproduction.org</a></p><h2>MAPS</h2><p>These map prototypes have been created following the needs of different projects and objectives:</p><p>The Sloan Foundation map of distributed manufacturing and Open-Know-Where Standard Development, European Horizon for the mAkE African European Maker Ecosystem, and the Innovative Manufacturing in Africa I.M.A.<br><br>The value proposition of these maps is integrated by the collection of relevant data, the examination and proposition of a <a href="https://map.internetofproduction.org/data-schema-design-choices/index.html" target="_blank" rel="noopener noreferrer">technical data storage standard</a>, the exploration of data collection methods and the machine-human interaction with the data.</p><p>The maps have been proposed for a set of different identified <a href="https://map.internetofproduction.org/use-cases/index.html" target="_blank" rel="noopener noreferrer">use cases</a>. And the data collection aims to be a tool for the future understanding and developing of innovation and location of resources.</p><p class="msg msg--highlight">The current work is in constant review and development. Maps and data amounts will change, accordingly to new finds, regulations and privacy requests.</p><p>GLOBAL (Sloan Foundation)<br><br></p><div class="post__iframe"><div class="pec-wrapper" data-consent-group-id="analytics"><iframe data-consent-overlay-added="true" loading="lazy" width="100%" height="50%" style="border-radius: 10px; border: 0px #ffffff none;" data-consent-src="https://map.internetofproduction.org/world_map.html" name="myiFrame" scrolling="no" frameborder="0" marginheight="0px" marginwidth="0px" allowfullscreen="allowfullscreen" data-mce-fragment="1"></iframe><div class="pec-overlay is-active" aria-hidden="false"><div class="pec-overlay-inner"><p></p><button class="pec-button" onclick="window.publiiEmbedConsentGiven('analytics'); return false;"></button></div></div><script>window.publiiEmbedConsentCheck('analytics');</script></div></div><p>mAkE (Horizon Europe)</p><div class="post__iframe"><div class="pec-wrapper" data-consent-group-id="analytics"><iframe data-consent-overlay-added="true" loading="lazy" width="100%" height="50%" style="border-radius: 10px; border: 0px #ffffff none;" data-consent-src="https://map.internetofproduction.org/makeafricaeu.html" name="myiFrame" scrolling="no" frameborder="0" marginheight="0px" marginwidth="0px" allowfullscreen="allowfullscreen"></iframe><div class="pec-overlay is-active" aria-hidden="false"><div class="pec-overlay-inner"><p></p><button class="pec-button" onclick="window.publiiEmbedConsentGiven('analytics'); return false;"></button></div></div><script>window.publiiEmbedConsentCheck('analytics');</script></div></div><p>IMA (Innovative Manufacturing in Africa)</p><div class="post__iframe"><div class="pec-wrapper" data-consent-group-id="analytics"><iframe data-consent-overlay-added="true" loading="lazy" width="100%" height="50%" style="border-radius: 10px; border: 0px #ffffff none;" data-consent-src="https://map.internetofproduction.org/ima.html" name="myiFrame" scrolling="no" frameborder="0" marginheight="0px" marginwidth="0px" allowfullscreen="allowfullscreen"></iframe><div class="pec-overlay is-active" aria-hidden="false"><div class="pec-overlay-inner"><p></p><button class="pec-button" onclick="window.publiiEmbedConsentGiven('analytics'); return false;"></button></div></div><script>window.publiiEmbedConsentCheck('analytics');</script></div></div><p> </p><h2>DATASETS AND RECORDS</h2><h3>SUMMARY</h3><p>This is a summary of the data based on the analysis and classification reports found on the GitHub Repositories:</p><h4>FACILITIES</h4><p>Facilities identification and filtering requires that:<br>Facility is active, the data is truth, and has: facility name, contact information, or address, or GPS location captured.</p><p>Processed:</p><ol><li><span style="text-decoration: underline;"><span style="color: #000000; text-decoration: underline;">"The Fab Foundation, FabLab Network and its partners",</span></span></li><li><span style="text-decoration: underline;"><span style="color: #000000; text-decoration: underline;">"Make Works, FabLab Barcelona and its partners",</span></span></li><li><span style="text-decoration: underline;"><span style="color: #000000; text-decoration: underline;">"Offene Werkstaetten, and its partners",</span></span></li><li><span style="text-decoration: underline;"><span style="color: #000000; text-decoration: underline;">"Field Ready Inc. and its partners",</span></span></li><li><span style="text-decoration: underline;"><span style="color: #000000; text-decoration: underline;">"Makery",</span></span></li><li><span style="text-decoration: underline;"><span style="color: #000000; text-decoration: underline;">"MakerTour",</span></span></li><li>"Open-Know-Where Data Awards r1",</li><li>"Open-Know-Where Data Awards r2",</li><li>"IMA Innovative Manufacturing in Africa",</li><li>"mAkE African European Maker Ecosystem".</li></ol><p>Yet to process:</p><ol><li>"Make, Makezine",</li><li>"Bay Area Makerspaces UC Berkeley",</li><li>"Bay Area Makerspaces Upbeatlab",</li><li>"sphere.diybio.org",</li><li>"Hackerspaces.org",</li><li>"Vulca",</li><li>"FabCity",</li><li>"Univeristy of Michigan 3DLab"</li></ol><p>Distribution by continent:</p><ul><li><strong>Africa</strong>: 8391</li><li><strong>Asia</strong>: 1580</li><li><strong>Europe</strong>: 1568</li><li><strong>North America</strong>: 357</li><li><strong>South America</strong>: 276</li><li><strong>Oceania</strong>: 23</li></ul><h4>MACHINERY</h4><p>The most common machines found are 3D printers following to CNC milling machines, the "other" class comprises to a variety of machines from presses to air vacuum moulding machines. This preliminary classification depends on the classes and tags defined by the FabLab Network. Later on we identified the need of a Taxonomy for the classification of machines.</p><ul><li><span class="ui-provider xs xt ji xu xv xw xx xy xz ya yb yc yd ye yf yg yh yi yj yk yl ym yn yo yp yq yr ys yt yu yv yw yx yy yz" dir="ltr">World wide: 7488 [<a href="https://iop-alliance.github.io/data_reports/reports/machines_in_fablabs_world_readback.html" target="_blank" rel="noopener noreferrer">Analysis report</a>]</span></li></ul><figure class="post__image"><img loading="lazy" src="https://map.internetofproduction.org/media/posts/4/Untitled.png" alt="Machine distribution graph" width="1336" height="967" sizes="(max-width: 768px) 100vw, 768px" srcset="https://map.internetofproduction.org/media/posts/4/responsive/Untitled-xs.png 300w, https://map.internetofproduction.org/media/posts/4/responsive/Untitled-sm.png 480w, https://map.internetofproduction.org/media/posts/4/responsive/Untitled-md.png 768w"></figure><h3>COLLECTION</h3><p>A GIT repository containing Jupyter notebooks designed for the collection and analysis of machinery and facilities data its available at:<br><a href="https://github.com/iop-alliance/okw_data_management">https://github.com/iop-alliance/okw_data_management</a>.</p><p>The notebooks cover a range of topics, including data acquisition processes, machinery cataloguing, and data management.</p><h3>PUBLICLY AVAILABLE SOURCES</h3><p>Data in compliance with privacy regulations is available for usage and citation at: <a href="https://zenodo.org/communities/iopa">https://zenodo.org/communities/iopa</a></p><h3 id="updateorremoval">UPDATE, OR REMOVAL</h3><p>Please send an email to: <a href="mailto:antonio.anaya@internetofproduction.org">antonio.anaya@internetofproduction.org</a> with the following:</p><ol><li>Subject: data [update] or [removal] required</li><li>Body: Name, location (city) of the record.</li><li>Part: Applies only to a part of the information like ie. email, address.</li><li>Complete: Applies to the whole record, for this send the record data using the form below and send the record to be replaced. ie. Previous record xx, xx, xx, xx, and New record. yy, yy, yy, yy.</li></ol><h3 id="datasubmission">SUBMISSION</h3><p class="msg msg--success">At The Internet of Production Alliance, we are grateful for the time and effort of your contributions to this data collection exercise.</p><ol><li>Add your Facility using the "Add facility" form below. If your facility is already added on the map be aware of that we still need to update your information.</li><li>Give us some feedback any step during the data filling process.</li></ol><p class="msg--highlight msg--success msg msg--info">Once we have your information, we will validate and show your data in the map.</p><h3 id="forms">FORMS</h3><p>A KoboToolBox survey is setup for data collection. With the following characteristics:</p><ol><li>Offline data submission is possible using the Kobo Collect tool.</li><li>The survey includes a MACHINE INVENTORY apart with the catalogue of machines collected by different databases and vendors.</li><li>For adding a capability to a facility at least one machine addition is required.</li><li>Agreements for contact information are required in compliance with GDPR regulations and other data privacy regulations.</li></ol><p><a href="https://map.internetofproduction.org/data-submission/index.html" target="_blank" rel="nofollow noopener noreferrer" class="btn btn--green">Add Facility and machinery.</a></p><h2>USAGE</h2><h3 id="howtoaddmaptoyourpage">HOW TO ADD THE OKW MAP TO YOUR PAGE</h3><ol><li>While editing your page's source code, copy&amp;paste this "iframe" inside a "div" element.</li></ol><pre><code>&lt;iframe width="100%" height="50%" style="border-radius: 10px; border: 0px #ffffff none;" src="https://map.internetofproduction.org/world_map.html" name="myiFrame" scrolling="no" frameborder="0" marginheight="0px" marginwidth="0px" allowfullscreen="allowfullscreen"&gt;&lt;/iframe&gt;</code></pre><p class="msg msg--info">In the next version of the map generator you will be able to:</p><ul><li>Use different sources of information and select them.</li><li>Parse the data by country, organization, type of machines and projects.</li></ul><p class="msg msg--highlight"><a href="https://airtable.com/shr6jR0EIZkfRdrFA" target="_blank" rel="noopener noreferrer">Let us know if you have any feedback.</a></p><p>2023, The Internet of Production Alliance.</p></div><footer><div class="post__footer-top"><div class="post__meta"><time datetime="2023-05-15T11:43">May 15, 2023 </time>by <a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html" rel="author" title="Antonio de Jesus Anaya Hernandez">Antonio de Jesus Anaya Hernandez </a><span>Updated on: <time datetime="2024-08-01T01:59">August 1, 2024</time></span></div></div><div class="post__footer-bottom"><div class="post__bio"><img src="https://map.internetofproduction.org/media/website/antonio_anaya-2.JPG" loading="lazy" height="4000" width="4164" alt="Antonio de Jesus Anaya Hernandez"><div><a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html"><strong>Antonio de Jesus Anaya Hernandez</strong></a><p>Open-Know-Where Project lead at The Internet of Production Alliance.</p><p><br>Certificated Digital Manufacturer Specialist by Fab Academy, Tech Startup Founder by MIT GSL, and AI developer by HICT Academy.</p></div></div></div></footer></article><section class="listing"><h2 class="h3">Featured Articles</h2><ul class="list"><li class="list__item list__item--thin"><h3 class="list__item-title"><a href="https://map.internetofproduction.org/working-group/index.html" class="invert">WORKING GROUP</a></h3><div class="list__item-meta"><span>Published: <time datetime="2024-04-11T05:57">April 11, 2024 </time></span><a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html" class="invert">Antonio de Jesus Anaya Hernandez</a></div></li></ul></section><section class="listing"><h2 class="h3">Recent Articles</h2><ul class="list"><li class="list__item list__item--thin"><h3 class="list__item-title"><a href="https://map.internetofproduction.org/working-group/index.html" class="invert">WORKING GROUP</a></h3><div class="list__item-meta"><span>Published: <time datetime="2024-04-11T05:57">April 11, 2024 </time></span><a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html" class="invert">Antonio de Jesus Anaya Hernandez</a></div></li><li class="list__item list__item--thin"><h3 class="list__item-title"><a href="https://map.internetofproduction.org/data-schema-design-choices/index.html" class="invert">DATA SCHEMA SPECIFICATION</a></h3><div class="list__item-meta"><span>Published: <time datetime="2024-04-06T12:24">April 6, 2024 </time></span><a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html" class="invert">Antonio de Jesus Anaya Hernandez</a></div></li><li class="list__item list__item--thin"><h3 class="list__item-title"><a href="https://map.internetofproduction.org/use-cases/index.html" class="invert">USE CASES OVERVIEW</a></h3><div class="list__item-meta"><span>Published: <time datetime="2024-03-28T07:30">March 28, 2024 </time></span><a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html" class="invert">Antonio de Jesus Anaya Hernandez</a></div></li><li class="list__item list__item--thin"><h3 class="list__item-title"><a href="https://map.internetofproduction.org/okw-charter/index.html" class="invert">OPEN-KNOW-WHERE (OKW) CHAPTER</a></h3><div class="list__item-meta"><span>Published: <time datetime="2024-02-19T06:06">February 19, 2024 </time></span><a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html" class="invert">Antonio de Jesus Anaya Hernandez</a></div></li><li class="list__item list__item--thin"><h3 class="list__item-title"><a href="https://map.internetofproduction.org/data-submission/index.html" class="invert">DATA SUBMISSION</a></h3><div class="list__item-meta"><span>Published: <time datetime="2023-12-19T19:47">December 19, 2023 </time></span><a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html" class="invert">Antonio de Jesus Anaya Hernandez</a></div></li><li class="list__item list__item--thin"><h3 class="list__item-title"><a href="https://map.internetofproduction.org/data-privacy-policy/index.html" class="invert">OKW DATA PRIVACY POLICY</a></h3><div class="list__item-meta"><span>Published: <time datetime="2023-12-19T18:14">December 19, 2023 </time></span><a href="https://map.internetofproduction.org/authors/antonio-de-jesus-anaya-hernandez/index.html" class="invert">Antonio de Jesus Anaya Hernandez</a></div></li></ul></section></div><aside class="main__left-aside"><div class="main__left-aside__inner"><h3>On this page</h3><nav class="aside-toc" id="aside-toc"></nav></div></aside></div></div><div class="main__right"><div class="main__right-inner"><div class="footer main__right-footer"><div class="footer__copy">2023-2024, The Internet of Production Alliance, Internet of Production UK</div></div></div></div></main><footer class="footer"><div class="footer__wrap"><div class="footer__inner"><div class="footer__copy">2023-2024, The Internet of Production Alliance, Internet of Production UK</div></div></div></footer><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',        
        submenuWidth: 300,        
        mobileMenuExpandableSubmenus: true,
        isHoverMenu: false,
        ariaButtonAttribute: 'aria-expanded',
   };</script><script src="https://map.internetofproduction.org/assets/js/html-contents.min.js?v=169077c370ab8ca62b029845f80f7fd5" defer="defer"></script><script>document.addEventListener("DOMContentLoaded", function(event) {
                  htmlContents('#aside-toc', {
                     area: '.post__entry',
                     top: 2,
                     bottom: 3,
                     listType: 'o',
                     filter: function(arr) {
                        return !arr.matches('.noOutline')
                     },
                     addIds: true,
                     addLinks: true
                  });

                  setTimeout(function() {
                     handleActiveClass('#aside-toc');
                  }, 0);
            })</script><script defer="defer" src="https://map.internetofproduction.org/assets/js/scripts.min.js?v=2633843d0ec7bc1192485f15a75eb96d"></script><script>var images = document.querySelectorAll('img[loading]');

        for (var i = 0; i < images.length; i++) {
            if (images[i].complete) {
                images[i].classList.add('is-loaded');
            } else {
                images[i].addEventListener('load', function () {
                    this.classList.add('is-loaded');
                }, false);
            }
        }</script><div class="pcb" data-behaviour="badge" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">Select which cookies to opt-in to via the checkboxes below; our website uses cookies to examine site traffic and user activity while on our site, for marketing, and to provide social media functionality. <a href="https://map.internetofproduction.org/data-privacy-policy/index.html">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--link pcb__btn--configure" aria-haspopup="dialog">Manage preferences</button> <button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Save</button></div></div></div><div class="pcb__popup" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-popup-title"><div class="pcb__popup__wrapper"><div class="pcb__inner pcb__popup__inner"><div class="pcb__popup__heading"><div id="pcb-popup-title" role="heading" aria-level="2" class="pcb__title">Cookie settings</div><button class="pcb__popup__close" aria-label="Close"></button></div><div class="pcb__popup__content"><div class="pcb__txt pcb__popup__txt">We use cookies to enhance your browsing experience, serve personalized ads or content, and analyze our traffic. By clicking "Accept All", you consent to our use of cookies. <a href="https://map.internetofproduction.org/data-privacy-policy/index.html">More details...</a></div><ul class="pcb__groups"><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Required</summary></details><div class="pcb__popup__switch is-checked"><input type="checkbox" data-group-name="" id="pcb-group-0" checked="checked"> <label for="pcb-group-0">Required</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Functionality</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="functions" id="functions-cookies"> <label for="functions-cookies">Functionality</label></div></li><li class="pcb__group"><details><summary class="pcb__group__title no-desc">Analytical</summary></details><div class="pcb__popup__switch"><input type="checkbox" data-group-name="analytics" id="analytics-cookies"> <label for="analytics-cookies">Analytical</label></div></li></ul></div><div class="pcb__buttons pcb__popup__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button> <button type="button" class="pcb__btn pcb__btn--reject">Reject all</button> <button type="button" class="pcb__btn pcb__btn--save">Save settings</button></div></div></div></div><div class="pcb__overlay" aria-hidden="true"></div><button class="pcb__badge" aria-label="Cookie Policy" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" width="40" height="40" viewBox="0 0 23 23" fill="currentColor"><path d="M21.41 12.71c-.08-.01-.15 0-.22 0h-.03c-.03 0-.05 0-.08.01-.07 0-.13.01-.19.04-.52.21-1.44.19-2.02-.22-.44-.31-.65-.83-.62-1.53a.758.758 0 0 0-.27-.61.73.73 0 0 0-.65-.14c-1.98.51-3.49.23-4.26-.78-.82-1.08-.73-2.89.24-4.49.14-.23.14-.52 0-.75a.756.756 0 0 0-.67-.36c-.64.03-1.11-.1-1.31-.35-.19-.26-.13-.71-.01-1.29.04-.18.06-.38.03-.59-.05-.4-.4-.7-.81-.66C5.1 1.54 1 6.04 1 11.48 1 17.28 5.75 22 11.6 22c5.02 0 9.39-3.54 10.39-8.42.08-.4-.18-.78-.58-.87Zm-9.81 7.82c-5.03 0-9.12-4.06-9.12-9.06 0-4.34 3.05-8 7.25-8.86-.08.7.05 1.33.42 1.81.24.32.66.67 1.38.84-.76 1.86-.65 3.78.36 5.11.61.81 2.03 2 4.95 1.51.18.96.71 1.54 1.18 1.87.62.43 1.38.62 2.1.62.05 0 .09 0 .13-.01-1.23 3.64-4.7 6.18-8.64 6.18ZM13 17c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1Zm5.29-12.3a.99.99 0 0 1-.29-.71c0-.55.45-.99 1-.99a1 1 0 0 1 .71.3c.19.19.29.44.29.71 0 .55-.45.99-1 .99a1 1 0 0 1-.71-.3ZM9 13.5c0 .83-.67 1.5-1.5 1.5S6 14.33 6 13.5 6.67 12 7.5 12s1.5.67 1.5 1.5Zm3.25.81a.744.744 0 0 1-.06-1.05c.28-.32.75-.34 1.05-.06.31.28.33.75.05 1.06-.15.16-.35.25-.56.25-.18 0-.36-.06-.5-.19ZM8.68 7.26c.41.37.44 1 .07 1.41-.2.22-.47.33-.75.33a.96.96 0 0 1-.67-.26c-.41-.37-.44-1-.07-1.41.37-.42 1-.45 1.41-.08Zm11.48 1.88c.18-.19.52-.19.7 0 .05.04.09.1.11.16.03.06.04.12.04.19 0 .13-.05.26-.15.35-.09.1-.22.15-.35.15s-.26-.05-.35-.15a.355.355 0 0 1-.11-.16.433.433 0 0 1-.04-.19c0-.13.05-.26.15-.35Zm-4.93-1.86a.75.75 0 1 1 1.059-1.06.75.75 0 0 1-1.059 1.06Z"/></svg></button></div><script>window.dataLayer = window.dataLayer || [];
                function gtag() { dataLayer.push(arguments); }

                window.publiiCBGCM = {
                    defaultState: {"ad_storage":false,"ad_personalization":false,"ad_user_data":false,"analytics_storage":true,"personalization_storage":false,"functionality_storage":true,"security_storage":true},
                    groups: []
                };
            
            (function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('🍪 Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('🍪 Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('🍪 GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('🍪 Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && cbConfig.initialLsState.indexOf(allowedGroup) === -1) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('🍪 GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('🍪 Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('🍪 Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('🍪 Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('🍪 Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('🍪 Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>